

import static org.junit.jupiter.api.Assertions.*;
import static org.junit.jupiter.api.Assumptions.*;

import org.junit.jupiter.api.*;
import javax.swing.*;
import java.awt.*;

class MenuTest {

    private Menu menu;

    @BeforeEach
    void setUp() throws Exception {
        assumeFalse(GraphicsEnvironment.isHeadless(), "Headless environment: skipping Swing tests");

        SwingUtilities.invokeAndWait(() -> menu = new Menu());
    }

    @AfterEach
    void tearDown() throws Exception {
        if (menu != null) {
            SwingUtilities.invokeAndWait(menu::dispose);
        }
    }

    @Test
    void windowHasCorrectTitle() {
        assertEquals("Ticket Grandmaster - Main Menu", menu.getTitle());
    }

    @Test
    void windowIsVisible() {
        assertTrue(menu.isVisible(), "Menu should be visible after construction");
    }

    @Test
    void hasFiveButtons() {
        assertEquals(5, countButtons(menu), "Expected 5 buttons on the main menu");
    }

    private int countButtons(Container root) {
        int count = 0;
        for (Component c : root.getComponents()) {
            if (c instanceof JButton) count++;
            if (c instanceof Container) count += countButtons((Container) c);
        }
        return count;
    }
}
